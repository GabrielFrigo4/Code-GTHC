/* SYSTEM */
#include <stdio.h>
/* CUSTOM */
#include "new_types.h"
#include "profile.h"
#include "screen.h"
#include "input.h"
#include "rand.h"

char *intro_info[] = {
    "####################################################",
    "# Criador: Gabriel Frigo                           #",
    "#[================================================]#",
    "# Nome do Jogo: Caixa Larga de Sapato, A Aventura! #",
    "####################################################",
    NULL,
};

char *
    intro_caixa_sapato[] = {
        "####################                    ####################                    ####################",
        "####################                    ####################                    ####################",
        "####################                    ####################                    ####################",
        "####################                    ####################                    ####################",
        "####################                    ####################                    ####################",
        "####################                    ####################                    ####################",
        "####################################################################################################",
        "####################################################################################################",
        "####################################################################################################",
        "####################################################################################################",
        "####################################################################################################",
        "####################################################################################################",
        "####################################################################################################",
        "####################################################################################################",
        "####################################################################################################",
        NULL,
};

int GAME_main();
int main(int argc, char **argv)
{
    clear_terminal();
    printf("Recomendamos maximizar o terminal :)\nAperte 'enter' para continuar");
    getc(stdin);
    init_rand();
    clear_terminal();
    return GAME_main();
}

int GAME_main()
{
    gameData game_data = {true, false};
    screen _screen = create_screen(38, 156);
    screen_set_edge(_screen, '#');
    screen_set_lines(_screen, intro_info, 2, 3);
    screen_set_lines(_screen, intro_caixa_sapato, 8, 2);
    while (game_data.running)
    {
        /* SET OUTPUT */
        screen_flush(_screen);

        /* GET INPUT */
        char input[_screen.width];
        fgets(input, _screen.width - 1, stdin);

        switch (input[0])
        {
        case '#':
            input_command(input, &game_data);
            break;
        default:
            input_play(input);
            break;
        }
    }
    clear_terminal();
    _screen = destroy_screen(_screen);
    return 0;
}